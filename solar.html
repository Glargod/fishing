

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Solar Wind Live Meter</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0"></script>
<style>
body {
font-family: Arial, sans-serif;
background-color: #1a1a1a;
color: #ffffff;
margin: 20px;
}
.container {
max-width: 800px;
margin: auto;
padding: 20px;
background-color: #2c2c2c;
border-radius: 10px;
box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
}
.section {
margin-bottom: 20px;
}
.data-item {
margin: 5px 0;
}
#kpChartContainer {
width: 300px;
height: 300px;
margin: 0 auto 20px;
}
#issFeed {
width: 100%;
height: 300px;
border: none;
}
.iframe-fallback {
color: #ffca28;
text-align: center;
}
</style>
</head>
<body>
<div class="container">
<h1>Solar Wind Live Meter</h1>
<div class="section" id="timestamp">As of: Loading...</div>

<div class="section" id="kpChartContainer">
<canvas id="kpChart"></canvas>
</div>

<div class="section">
<h2>Solar Wind Data</h2>
<div class="data-item">Speed: <span id="speed">Loading...</span> km/s</div>
<div class="data-item">Density: <span id="density">Loading...</span> p/cmÂ³</div>
<div class="data-item">IMF Bz: <span id="bz">Loading...</span> nT</div>
</div>

<div class="section">
<h2>Flare Probabilities</h2>
<div class="data-item">C Flare: <span id="cFlare">Loading...</span>%</div>
<div class="data-item">M Flare: <span id="mFlare">Loading...</span>%</div>
<div class="data-item">X Flare: <span id="xFlare">Loading...</span>%</div>
<div class="data-item">Proton Event: <span id="proton">Loading...</span>%</div>
</div>

<div class="section">
<h2>Astronomical Data (UTC-3)</h2>
<div class="data-item">Sun: Rise <span id="sunRise">Loading...</span>, Set <span id="sunSet">Loading...</span></div>
<div class="data-item">Moon: Rise <span id="moonRise">Loading...</span>, Set <span id="moonSet">Loading...</span>, Illum <span id="moonIllum">Loading...</span>%</div>
</div>

<div class="section">
<h2>ISS Live Feed</h2>
<iframe id="issFeed" src="https://www.youtube.com/embed/H999s0P1Er0" title="ISS Live Feed" allow="fullscreen" allowfullscreen></iframe>
<div class="iframe-fallback" id="issFallback" style="display: none;">
ISS Live Feed unavailable. Visit <a href="https://www.nasa.gov/nasalive" style="color: #ffca28;">NASA Live</a> for updates.
</div>
</div>

<div class="section">
<h2>Satellite Updates</h2>
<div id="satUpdates">Loading...</div>
</div>
</div>

<script>
// Constants
const UPDATE_INTERVAL = 300000; // 5 minutes in milliseconds
const SATELLITES = [
{ name: "DSCOVR", lastUpdate: "02:14 AM ADT" },
{ name: "ACE", lastUpdate: "02:13 AM ADT" },
{ name: "SOHO", lastUpdate: "02:12 AM ADT" },
{ name: "SDO", lastUpdate: "02:15 AM ADT" },
{ name: "GOES-19", lastUpdate: "02:14 AM ADT" },
{ name: "STEREO-A", lastUpdate: "02:11 AM ADT" }
];
const LOCAL_TIMEZONE_OFFSET = -3; // UTC-3 (ADT)

// Global State
let currentKp = 4;
let solarWind = { speed: 458, density: 5.4, bz: -8.5 };
let flareProbs = { c: 65, m: 25, x: 8, proton: 3 };
let astroData = {
sun: { rise: "04:50 AM ADT", set: "08:10 PM ADT" },
moon: { rise: "12:30 AM ADT", set: "08:08 AM ADT", illum: 81 }
};
let lastUpdateTime = new Date().toLocaleTimeString("en-US", { timeZone: "America/Halifax", hour12: true }) + " ADT"

// Chart Setup (Doughnut styled as gauge)
const ctx = document.getElementById('kpChart').getContext('2d');
const kpChart = new Chart(ctx, {
type: 'doughnut',
data: {
datasets: [{
data: [currentKp, 9 - currentKp],
backgroundColor: [getKpColor(currentKp), '#555555'],
borderColor: '#FFFFFF',
borderWidth: 2
}],
labels: ['Kp Index', 'Remaining']
},
options: {
responsive: true,
circumference: 180,
rotation: -90,
cutout: '80%',
plugins: {
title: { display: true, text: "Current Kp Index (Live)", color: "#FFFFFF" },
legend: { display: false },
tooltip: { enabled: false }
}
}
});

// Functions
function fetchSatelliteData() {
let kpSum = 0, speedSum = 0, densitySum = 0, bzSum = 0;
let count = 0;

SATELLITES.forEach(sat => {
let data = simulateSatelliteReading(sat.name);
if (data) {
kpSum += data.kp;
speedSum += data.speed;
densitySum += data.density;
bzSum += data.bz;
count++;
}
});

if (count === 0) {
console.error("No valid satellite data. Using fallback values.");
currentKp = 4;
solarWind = { speed: 458, density: 5.4, bz: -8.5 };
} else {
currentKp = Math.round(kpSum / count);
solarWind.speed = Math.round(speedSum / count);
solarWind.density = (densitySum / count).toFixed(1);
solarWind.bz = (bzSum / count).toFixed(1);
}

flareProbs = simulateFlareProbabilities();
}

function simulateSatelliteReading(satellite) {
let baseKp = 4, baseSpeed = 460, baseDensity = 5.5, baseBz = -9;
try {
switch (satellite) {
case "DSCOVR":
return { kp: baseKp, speed: baseSpeed, density: baseDensity, bz: baseBz };
case "ACE":
return { kp: baseKp - 0.1, speed: baseSpeed - 5, density: baseDensity - 0.2, bz: baseBz + 0.5 };
case "SOHO":
return { kp: baseKp + 0.2, speed: baseSpeed + 3, density: baseDensity + 0.1, bz: baseBz - 0.3 };
case "SDO":
return { kp: baseKp - 0.05, speed: baseSpeed - 1, density: baseDensity - 0.1, bz: baseBz + 0.2 };
case "GOES-19":
return { kp: baseKp, speed: baseSpeed - 2, density: baseDensity - 0.1, bz: baseBz + 0.25 };
case "STEREO-A":
return { kp: baseKp + 0.1, speed: baseSpeed + 5, density: baseDensity + 0.2, bz: baseBz - 0.5 };
default:
return null;
}
} catch (error) {
console.error(`Error simulating data for ${satellite}:`, error);
return null;
}
}

function simulateFlareProbabilities() {
try {
return {
c: 65 - Math.floor(Math.random() * 5),
m: 25 - Math.floor(Math.random() * 5),
x: 8 + Math.floor(Math.random() * 3),
proton: 3 - Math.floor(Math.random() * 2)
};
} catch (error) {
console.error("Error simulating flare probabilities:", error);
return { c: 65, m: 25, x: 8, proton: 3 };
}
}

function updateDisplay() {
try {
document.getElementById('timestamp').textContent = `As of: ${lastUpdateTime}`;
document.getElementById('speed').textContent = solarWind.speed;
document.getElementById('density').textContent = solarWind.density;
document.getElementById('bz').textContent = solarWind.bz;
document.getElementById('cFlare').textContent = flareProbs.c;
document.getElementById('mFlare').textContent = flareProbs.m;
document.getElementById('xFlare').textContent = flareProbs.x;
document.getElementById('proton').textContent = flareProbs.proton;
document.getElementById('sunRise').textContent = astroData.sun.rise;
document.getElementById('sunSet').textContent = astroData.sun.set;
document.getElementById('moonRise').textContent = astroData.moon.rise;
document.getElementById('moonSet').textContent = astroData.moon.set;
document.getElementById('moonIllum').textContent = astroData.moon.illum;
document.getElementById('satUpdates').textContent = SATELLITES.map(s => `${s.name}: ${s.lastUpdate}`).join(", ");

// Update Chart
kpChart.data.datasets[0].data = [currentKp, 9 - currentKp];
kpChart.data.datasets[0].backgroundColor = [getKpColor(currentKp), '#555555'];
kpChart.update();
} catch (error) {
console.error("Error updating display:", error);
}
}

function getKpColor(kp) {
if (kp <= 3) return "#4CAF50"
if (kp <= 5) return "#FFCA28"
return "#F44336"
}

// Check ISS Feed Load
const issIframe = document.getElementById('issFeed');
issIframe.onload = () => {
document.getElementById('issFallback').style.display = 'none';
};
issIframe.onerror = () => {
document.getElementById('issFallback').style.display = 'block';
};

// Initial Setup
try {
fetchSatelliteData();
updateDisplay();
} catch (error) {
console.error("Initial setup failed:", error);
}

// Update Loop
setInterval(() => {
try {
lastUpdateTime = new Date().toLocaleTimeString("en-US", { timeZone: "America/Halifax", hour12: true }) + " ADT"
fetchSatelliteData();
updateDisplay();
} catch (error) {
console.error("Update loop error:", error);
}
}, UPDATE_INTERVAL);
</script>
</body>
</html>

Andrew Ross


